<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이벤트</title>
    <script>
        //window의 Load 이벤트는
        //파일을 전부 읽어서 태그들을 전부 메모리에 적재한 후에 발생
        window.addEventListener("load",(e)=>{
            document.getElementById("display").innerHTML ="이벤트처리"
            for(let i=0; i<20; i++){
                document.getElementById("body").innerHTML += "<h1>무한 스크롤</h1>"
            }
            window.addEventListener("scroll",()=>{
                //스크롤하는 위치 와 문서의 높이가 같을때
                //가장 아래에서 스크롤을 할 때

                //스크롤 하느 가장 상단의 위치를 가져오기
                var supportPageOffset = window.pageXOffset !== undefined;
                console.log(window.pageXOffset)
                console.log(supportPageOffset)
                var isCSS1Compat = ((document.compatMode || "") === "CSS1Compat");
                console.log(isCSS1Compat)
                var scrollTop = supportPageOffset ? window.pageYOffset :
                    isCSS1Compat ? document.documentElement.scrollTop : 
                        document.body.scrollTop;

                
                //스크롤하는 높이
                var scrollHeight = scrollTop + window.innerHeight;

                //문서의 높이
                var documentHeight = document.body.clientHeight;
            
                //스크롤 하는 위치가 문서의 높이보다 크거나 같다면
                if(scrollHeight >= documentHeight){
                    for(let i=0; i<20; i++){
                document.getElementById("body").innerHTML += "<h1>무한 스크롤</h1>"
            }
                }
                
            })
        })
        
    </script>
</head>
<body>
    <div id = "display"></div>
    <div id="body"></div>
</body>
</html>